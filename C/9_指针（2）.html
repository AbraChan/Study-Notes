<html>
<head>
  <title>9_指针（2）</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/607057 (zh-CN, DDL); Windows/10.0.0 (Win64); EDAMVersion=V2;"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="3009"/>
<h1>9_指针（2）</h1>

<div>
<span><div><div><span style="font-size: 12pt;">【本文结构】</span></div><ul><li><div><span style="font-size: 16px;">8、二级指针（</span><span style="font-size: 16px; color: rgb(173, 0, 0);">指向指针的指针</span><span style="font-size: 16px;">）</span></div></li><li><div><span style="font-size: 12pt;">9、空指针NULL 和 void指针</span></div></li><li><div><span style="font-size: 16px;">10、指针和数组</span></div></li><ul><li><div><span style="font-size: 16px;">数组和指针绝不等价，数组是另外一种类型</span></div></li><li><div><span style="font-size: 16px;">数组在何时才会转化为指针</span></div></li></ul></ul><div><span style="font-size: 12pt;"><br/></span></div><ul><li><div><span style="font-size: 16px;">11、指针数组（</span><span style="font-size: 16px; color: rgb(173, 0, 0);">数组每个元素都是指针</span><span style="font-size: 16px;">）</span></div></li><li><div><span style="font-size: 16px;">12、一道题目玩转 </span><span style="font-size: 16px; text-decoration: underline;">指针数组</span><span style="font-size: 16px;"> 和 </span><span style="font-size: 16px; text-decoration: underline;">二级指针</span></div></li></ul><div><span style="font-size: 12pt;"><br/></span></div><ul><li><div><span style="font-size: 12pt;">13、二维数组指针（</span><span style="font-size: 12pt; color: rgb(173, 0, 0);">指向二维数组的指针</span><span style="font-size: 12pt;">）</span></div></li><li><div><span style="font-size: 16px;">14、函数指针（</span><span style="font-size: 16px; color: rgb(173, 0, 0);">指向函数的指针</span><span style="font-size: 16px;">）</span></div></li></ul><div><font style="font-size: 12pt;"><br/></font></div><ul><li><div><span style="font-size: 12pt;">15、彻底攻克C语言指针，再复杂的指针都可以理解</span></div></li><li><div><span style="font-size: 16px;">16、C语言指针总结</span></div></li></ul><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;">【8 </span><a href="http://c.biancheng.net/view/2016.html" style="font-size: 12pt; color: rgb(168, 168, 168);">二级指针（指向指针的指针）</a><span style="font-size: 12pt;">】</span></div><ul><li><div><span style="font-size: 16px;"><span style="font-size: 16px; font-weight: bold;">二级指针 / 指向指针的指针</span>：</span> <span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">如果一个指针指向的是另外一个指针，我们就称它为</span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(178, 34, 34); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">二级指针</span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">，或者</span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(178, 34, 34); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">指向指针的指针</span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">。</span></div></li><ul><li><div><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">指针可以指向一份</span><span style="font-size: 14px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; text-decoration: underline;">普通类型的数据</span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">，例如 int、double、char 等，也可以指向一份</span><span style="font-size: 14px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; text-decoration: underline;">指针类型的数据</span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">，例如 int *、double *、char * 等。</span></div></li><li><div><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">指针变量也是一种变量，也会占用存储空间，也可以使用 </span><span style="font-size: 11pt; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;;">&amp; </span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">获取它的地址。C语言不限制指针的级数，每增加一级指针，在定义指针变量时就得增加一个星号 </span><span style="font-size: 11pt; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;;">* </span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">。p1 是一级指针，指向普通类型的数据，定义时有一个</span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;"> </span><span style="font-size: 11pt; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;;">* </span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">；p2 是二级指针，指向一级指针 p1，定义时有两个</span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;"> </span><span style="font-size: 11pt; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;;">* </span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">。</span></div></li></ul></ul><div><span style="font-size: 11pt;"><br/></span></div><ul><ul><li><div><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">假设有一个 int 类型的变量 a，p1是指向 a 的指针变量，p2 又是指向 p1 的指针变量，它们的关系如下图所示：</span></div></li></ul></ul><div><span style="font-size: 12pt;">                 </span> <span style="font-size: 12pt;"><img src="9_指针（2）_files/Image.jpg" type="image/jpeg" data-filename="Image.jpg" width="328"/></span></div><ul><ul><li><div><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">将这种关系转换为C语言代码：</span></div></li></ul></ul><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 10pt;">int a = 100;</font></div><div><font style="font-size: 10pt;">int *p1 = &amp;a; //p1 的值是 &amp;a， *p1 表示 a 的值</font></div><div><font style="font-size: 11pt;background-color: rgb(255, 250, 165);-evernote-highlight:true;">int **p2 = &amp;p1;</font> <font style="font-size: 10pt;">//p2 的值是 &amp;p1， *p2 表示 p1 的值，即 a 的地址； **p2 看做是  *(*p2) = *p1 = *(&amp;a)，即 a 的值</font></div></div><div><font style="font-size: 10pt;"><br/></font></div><ul><li><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">高级指针</span></span></div></li><li><div><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">如果我们希望再定义一个三级指针 p3，让它指向 p2，那么可以这样写：</span></div></li></ul><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 10pt;">//三级指针</font></div><div><font style="font-size: 11pt;">int ***p3 = &amp;p2;</font> <font style="font-size: 10pt;">//p2是二级指针</font></div><div><font style="font-size: 10pt;"><br/></font></div><div><font style="font-size: 10pt;">//四级指针</font></div><div><font style="font-size: 11pt;">int ****p4 = &amp;p3;</font> <font style="font-size: 10pt;">//p3是三级指针</font></div></div><ul><li><div><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">实际开发中会经常使用一级指针和二级指针，几乎用不到高级指针。</span></div></li></ul><div><span style="font-size: 11pt;"><br/></span></div><ul><li><div><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">想要获取指针指向的数据时，一级指针加一个 </span><span style="font-size: 11pt; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;;">* </span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">，二级指针加两个 </span><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: &quot;Helvetica Neue&quot;;">* </span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">，三级指针加三个 </span><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: &quot;Helvetica Neue&quot;;">* </span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">，以此类推，请看代码：</span></div></li></ul><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 10pt;">#include &lt;stdio.h&gt;</font></div><div><font style="font-size: 10pt;">int main() {</font></div><div><font style="font-size: 10pt;">       int a = 100;</font></div><div><font style="font-size: 10pt;">       int *p1 = &amp;a;</font></div><div><font style="font-size: 10pt;">       int **p2 = &amp;p1;</font></div><div><font style="font-size: 10pt;">       int ***p3 = &amp;p2;</font></div><div><font style="font-size: 10pt;"><br/></font></div><div><font style="font-size: 10pt;">       //输出a的值</font></div><div><font style="font-size: 10pt;">       printf(&quot;a 的值  ：a=%d *p1=%d **p2=%d ***p3=%d\n&quot;, a, *p1, **p2, ***p3);</font></div><div><font style="font-size: 10pt;"><br/></font></div><div><font style="font-size: 10pt;">       //输出a的地址</font></div><div><font style="font-size: 10pt;">       printf(&quot;a 的地址：&amp;a=%#X p1=%#X *p2=%#X **p3=%#X\n&quot;, &amp;a, p1, *p2, **p3);</font></div><div><font style="font-size: 10pt;"><br/></font></div><div><font style="font-size: 10pt;">       //输出p1的地址</font></div><div><font style="font-size: 10pt;">       printf(&quot;p1的地址：&amp;p1=%#X p2=%#X *p3=%#X\n&quot;, &amp;p1, p2, *p3);</font></div><div><font style="font-size: 10pt;"><br/></font></div><div><font style="font-size: 10pt;">       //输出p2的地址</font></div><div><font style="font-size: 10pt;">       printf(&quot;p2的地址：&amp;p2=%#X p3=%#X\n&quot;, &amp;p2, p3);</font></div><div><font style="font-size: 10pt;"><br/></font></div><div><font style="font-size: 10pt;">       return 0;</font></div><div><font style="font-size: 10pt;">}</font></div><div><font style="font-size: 10pt;"><br/></font></div><div><font style="font-size: 10pt;">运行结果：</font></div><div>a 的值  ：a=100 *p1=100 **p2=100 ***p3=100</div><div>a 的地址：&amp;a=0X12FFB24 p1=0X12FFB24 *p2=0X12FFB24 **p3=0X12FFB24</div><div>p1的地址：&amp;p1=0X12FFB18 p2=0X12FFB18 *p3=0X12FFB18</div><div>p2的地址：&amp;p2=0X12FFB0C p3=0X12FFB0C</div></div><ul><ul><li><div><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">以三级指针 p3 为例来分析上面的代码。</span></div></li><ul><li><div><span style="font-size: 11pt; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;;">***p3 </span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">等价于 </span><span style="font-size: 11pt; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;;">*(*(*p3))</span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">。</span></div></li><li><div><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">*p3 得到的是 p2 的值，也即 p1 的地址；</span></div></li><li><div><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">*(*p3) 得到的是 p1 的值，也即 a 的地址；</span></div></li><li><div><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">经过三次“取值”操作后，*(*(*p3)) 得到的才是 a 的值。</span></div></li></ul><li><div><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">假设 a、p1、p2、p3 的地址分别是 0X00A0、0X1000、0X2000、0X3000，它们之间的关系可以用下图来描述：（</span> <span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">方框里面是变量本身的值，方框下面是变量的地址。）</span></div></li></ul></ul><div><span style="font-size: 12pt;">                 </span> <span style="font-size: 12pt;"><img src="9_指针（2）_files/Image [1].jpg" type="image/jpeg" data-filename="Image.jpg" width="481"/></span></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;">【9 </span><span style="font-size: 12pt;"><a href="http://c.biancheng.net/view/vip_2017.html" style="font-size: 12pt;">空指针NULL 和 void指针</a></span><span style="font-size: 12pt;">】</span></div><ul><li><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">空指针NULL</span></span></div></li><li><div><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">一个指针变量可以指向计算机中的任何一块内存，不管该内存有没有被分配，也不管该内存有没有使用权限，只要把地址给它，它就可以指向，C语言没有一种机制来保证指向的内存的正确性，程序员必须自己提高警惕。</span></div></li><li><div><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">很多初学者会在无意间对没有初始化的指针进行操作，这是非常危险的，请看下面的例子：</span></div></li></ul><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 10pt;">#include &lt;stdio.h&gt;</font></div><div><font style="font-size: 10pt;"><br/></font></div><div><font style="font-size: 10pt;">int main() {</font></div><div><font style="font-size: 10pt;">       char *str;</font></div><div><font style="font-size: 10pt;">       //str = &quot;http://c.biancheng.net&quot;; //使用这一句，注释掉下面的语句 <span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">gets(str);</span> 的话，程序可以正常运行，运行结果是：http://c.biancheng.net</font></div><div><font style="font-size: 10pt;">       gets(str);</font></div><div><font style="font-size: 10pt;">       printf(&quot;%s\n&quot;, str);</font></div><div><font style="font-size: 10pt;">       return 0;</font></div><div><font style="font-size: 10pt;">}</font></div></div><ul><ul><li><div><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">这段程序没有语法错误，</span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 14px; color: rgb(173, 0, 0); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">能够通过编译和链接</span></span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">，但当用户输入完字符串并按下回车键时就会发生错误（</span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 14px; color: rgb(173, 0, 0); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">运行阶段？</span></span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">），在 Linux 下表现为段错误（Segment Fault），在 Windows 下程序直接崩溃。如果你足够幸运，或者输入的字符串少，也可能不报错，这都是未知的。</span></div></li></ul></ul><div><span style="font-size: 12pt;">                 </span><span style="font-size: 12pt;"><img src="9_指针（2）_files/Image.png" type="image/png" data-filename="Image.png" width="560"/></span></div><ul><ul><li><div><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">前面我们讲过，未初始化的局部变量的值是不确定的，C语言并没有对此作出规定，不同的编译器有不同的实现，我曾警告大家不要直接使用未初始化的局部变量。上面的代码中，str 就是一个未初始化的局部变量，它的值是不确定的，究竟指向哪块内存也是未知的，大多数情况下这块内存没有被分配或者没有读写权限，使用 gets() 函数向它里面写入数据显然是错误的。</span></div></li></ul></ul><div><span style="font-size: 11pt;"><br/></span></div><ul><li><div><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 12pt; color: rgb(173, 0, 0); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">强烈建议对没有初始化的指针赋值为 NULL</span></span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">，例如：</span></div></li></ul><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font><font style="font-size: 12pt;">char *str = NULL;</font></font></div></div><ul><ul><li><div><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">NULL 是“零值、等于零”的意思，在C语言中表示</span><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 11pt; color: rgb(173, 0, 0); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">空指针</span></span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">。从表面上理解，空指针是不指向任何数据的指针，是无效指针，程序使用它不会产生效果。</span></div></li><ul><li><div><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(249, 249, 249); color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">注意区分大小写，null 没有任何特殊含义，只是一个普通的标识符。</span></div></li></ul><li><div><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">其实，NULL 是在 </span><span style="font-size: 11pt; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;;"><span style="background-color: rgb(255, 250, 165); font-size: 11pt; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;;-evernote-highlight:true;">stdio.h</span> </span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">中定义的一个宏，它的具体内容为：</span></div></li></ul></ul><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">#defin</font><font style="font-size: 12pt;"><font>e </font>NULL ((void *)0)</font></div></div><ul><ul><li><div><span style="font-size: 11pt; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;;">(void *)0 </span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">表示把数值 0 强制转换为 </span><span style="font-size: 11pt; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;;">void * </span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">类型，最外层的 </span><span style="font-size: 11pt; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;;">( ) </span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">把宏定义的内容括起来，防止发生歧义。从整体上来看，</span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 14px; color: rgb(173, 0, 0); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">NULL 指向了地址为 0 的内存</span></span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">，而不是前面说的不指向任何数据。</span></div></li><li><div><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">在进程的虚拟地址空间中，最低地址处有一段内存区域被称为保留区，这个区域不存储有效数据，也不能被用户程序访问，将 NULL 指向这块区域很容易检测到违规指针。</span></div></li><li><div><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">在大多数操作系统中，极小的地址通常不保存数据，也不允许程序访问，NULL 可以指向这段地址区间中的任何一个地址。</span></div></li><li><div><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">注意，C语言没有规定 NULL 的指向，只是大部分标准库约定成俗地将 NULL 指向 0，所以不要将 NULL 和 0 等同起来：</span></div></li><ul><li><div><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(249, 249, 249); color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">注意 NULL 和 NUL 的区别：NULL 表示空指针，是一个宏定义，可以在代码中直接使用。而 NUL 表示字符串的结束标志 '\0'，它是ASCII码表中的第 0 个字符。NUL 没有在C语言中定义，仅仅是对 '\0' 的称呼，不能在代码中直接使用。</span></div></li></ul></ul></ul><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">//下面的这种写法是不专业的</font></div><div><font style="font-size: 12pt;">int *p = 0;</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">//而应该坚持写为：</font></div><div><font style="font-size: 12pt;">int *p = NULL;</font></div></div><div><span style="font-size: 11pt;"><br/></span></div><div><span style="font-size: 11pt;"><br/></span></div><ul><ul><li><div><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">很多库函数都对传入的指针做了判断，如果是空指针就不做任何操作，或者给出提示信息。更改上面的代码，给 str 赋值 NULL，看看会有什么效果：</span></div></li></ul></ul><div><span style="font-size: 12pt;">                 </span><span style="font-size: 12pt;"><img src="9_指针（2）_files/Image [1].png" type="image/png" data-filename="Image.png" width="724"/></span></div><div><font style="font-size: 12pt;"><br/></font></div><ul><li><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">void指针</span></span></div></li><li><div><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">对于空指针 NULL 的宏定义内容，上面只是对<span style="background-color: rgb(255, 250, 165); font-size: 14px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;-evernote-highlight:true;"> </span></span><span style="font-size: 11pt; background-color: rgb(255, 250, 165); color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;;-evernote-highlight:true;">((void *)0) </span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">作了粗略的介绍，这里重点说一下 </span><span style="font-size: 11pt; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;;"><span style="background-color: rgb(255, 250, 165); font-size: 11pt; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;;-evernote-highlight:true;">void *</span> </span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">的含义。void 用在函数定义中可以表示函数没有返回值或者没有形式参数，用在这里</span><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 11pt; color: rgb(173, 0, 0); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">表示指针指向的数据的类型是未知的</span></span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">。</span></div></li><li><div><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">也就是说，</span><span style="font-size: 11pt; background-color: rgb(255, 250, 165); color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;;-evernote-highlight:true;">void *</span><span style="font-size: 11pt; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;;"> </span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">表示</span><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 11pt; color: rgb(173, 0, 0); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">一个有效指针</span></span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">，它确实指向实实在在的数据，只是数据的类型尚未确定，</span><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 11pt; color: rgb(173, 0, 0); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">在后续使用过程中一般要进行强制类型转换</span></span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">。</span></div></li></ul><div><span style="font-size: 12pt;">         </span><span style="font-size: 12pt;"><img src="9_指针（2）_files/Image [2].png" type="image/png" data-filename="Image.png" width="684"/></span></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 16px;">【10 指针和数组】</span></div><ul><li><div><span style="font-size: 16px;"><a href="http://c.biancheng.net/view/vip_2018.html" style="font-size: 16px;">数组和指针绝不等价，数组是另外一种类型</a></span></div></li><ul><li><div><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">通过前面的讲解，相信很多读者都会认为数组和指针是等价的，数组名表示数组的首地址。不幸的是，这是一种非常危险的想法，并不完全正确，前面我们将数组和指针等价起来是为了方便大家理解（在大多数情况下数组名确实可以当做指针使用）。</span></div></li><ul><li><div><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">二者不等价的原因是：数组名的含义更加丰富，它即可表示数组，也可表示指向该数组的数组指针，而数组指针变量只能是数组指针。</span></div></li></ul><li><div><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 14px; color: rgb(173, 0, 0); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">数组和指针不等价的一个典型案例就是求数组的长度，这个时候只能使用数组名，不能使用数组指针</span></span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">：</span></div></li></ul></ul><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 11pt;">#include &lt;stdio.h&gt;</font></div><div><font style="font-size: 11pt;">int main() {</font></div><div><font style="font-size: 11pt;">       int arr[6] = { 0, 1,2,3,4,5 };</font></div><div><font style="font-size: 11pt;">       int *p = arr; //变量p是一个（一维）数组指针，指向一维数组a。</font></div><div><font style="font-size: 11pt;">       </font></div><div><font style="font-size: 11pt;">       int len_arr = sizeof(arr) / sizeof(int);</font></div><div><font style="font-size: 11pt;">       int len_p = sizeof(p) / sizeof(int);</font></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;">       printf(&quot;len_arr: %d\n&quot;, len_arr);</font></div><div><font style="font-size: 11pt;">       printf(&quot;len_a: %d\n&quot;, len_p);</font></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;">       return 0;</font></div><div><font style="font-size: 11pt;">}</font></div><div><font style="font-size: 11pt;"><br/></font></div><div>运行结果：</div><div>len_arr: 6</div><div>len_a: 1</div></div><ul><ul><ul><li><div><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 11pt; color: rgb(173, 0, 0); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">数组是一系列数据的集合，没有开始和结束标志</span></span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">，p 仅仅是一个指向 int 类型的指针，编译器不知道它指向的是一个整数还是一堆整数，对 p 使用 sizeof 求得的是指针变量本身的长度。也就是说，编译器并没有把 p 和数组关联起来，p 仅仅是一个指针变量，不管它指向哪里，sizeof 求得的永远是它本身所占用的字节数。</span></div></li><li><div><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">站在编译器的角度讲，变量名、数组名都是一种符号，它们最终都要和数据绑定起来。</span><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 11pt; color: rgb(173, 0, 0); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">变量名用来指代一份数据，数组名用来指代一组数据（数据集合</span></span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(173, 0, 0); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">）</span><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 11pt; color: rgb(173, 0, 0); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">，它们都是有类型的，以便推断出所指代的数据的长度</span></span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">。</span></div></li><ul><li><div><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 11pt; color: rgb(178, 34, 34); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">对！数组也有类型，这是很多读者没有意识到的，大部分C语言书籍对这一点也含糊其辞！我们可以将 int、float、char 等理解为基本类型，将数组理解为由基本类型派生得到的稍微复杂一些的类型。sizeof 就是根据符号的类型来计算长度的。</span></span></div></li></ul></ul></ul></ul><div><span style="font-size: 12pt;"><br/></span></div><ul><ul><ul><ul><li><div><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">对于数组 a，<span style="background-color: rgb(255, 250, 165); font-size: 14px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;-evernote-highlight:true;">它的类型是 </span></span><span style="font-size: 11pt; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;;"><span style="background-color: rgb(255, 250, 165); font-size: 11pt; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;;-evernote-highlight:true;">int [6]</span> </span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">，表示这是一个拥有 6 个 int 数据的集合，1 个 int 的长度为 4，6 个 int 的长度为 4×6 = 24，sizeof 很容易求得。</span></div></li><li><div><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">对于指针变量 p，<span style="background-color: rgb(255, 250, 165); font-size: 14px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;-evernote-highlight:true;">它的类型是 </span></span><span style="font-size: 11pt; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;;"><span style="background-color: rgb(255, 250, 165); font-size: 11pt; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;;-evernote-highlight:true;">int *</span> </span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">，在 32 位环境下长度为 4，在 64 位环境下长度为 8。</span></div></li><li><div><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">对于二维数组，也是类似的道理，例如 </span><span style="font-size: 11pt; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;;">int a[3][3]={1, 2, 3, 4, 5, 6, 7, 8, 9}; </span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">，<span style="background-color: rgb(255, 250, 165); font-size: 14px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;-evernote-highlight:true;">它的类型是 </span></span><span style="font-size: 11pt; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;;"><span style="background-color: rgb(255, 250, 165); font-size: 11pt; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;;-evernote-highlight:true;">int [3][3]</span> </span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">，长度是 4×3×3 = 36，读者可以亲自测试。</span></div></li><li><div><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">归根结底，a 和 p 这两个符号的类型不同，指代的数据也不同，它们不是一码事，</span><font style="font-size: 11pt;"><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 11pt; color: rgb(173, 0, 0); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">sizeof 是根据符号类型来求长度的（</span></span><span style="font-size: 11pt; color: rgb(173, 0, 0); font-family: &quot;Helvetica Neue&quot;;">sizeof 是一个操作符，不是函数</span><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 11pt; color: rgb(173, 0, 0); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">）</span></span></font><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">，a 和 p 的类型不同，求得的长度自然也不一样。</span></div></li></ul></ul></ul></ul><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><ul><li><div><span style="font-size: 16px;"><a href="http://c.biancheng.net/view/vip_2019.html" style="font-size: 16px;">数组在何时才会转化为指针</a></span></div></li><li><div><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 12pt; color: rgb(173, 0, 0); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">1、C语言标准规定，当数组名作为</span><span style="font-size: 12pt; color: rgb(173, 0, 0); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; text-decoration: underline;">数组定义的标识符</span><span style="font-size: 12pt; color: rgb(173, 0, 0); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">、</span><span style="font-size: 12pt; color: rgb(173, 0, 0); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; text-decoration: underline;">sizeof</span> <span style="font-size: 12pt; color: rgb(173, 0, 0); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">或</span> <span style="font-size: 12pt; color: rgb(173, 0, 0); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; text-decoration: underline;">&amp;</span> <span style="font-size: 12pt; color: rgb(173, 0, 0); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; text-decoration: underline;">的操作数</span><span style="font-size: 12pt; color: rgb(173, 0, 0); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">时，它才表示整个数组本身，</span><span style="font-size: 12pt; color: rgb(173, 0, 0); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">在其他的表达式中</span><span style="font-size: 12pt; color: rgb(173, 0, 0); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">，数组名会被转换为指向第 0 个元素的指针（地址）。</span></span></div></li><ul><li><div><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">数组名的本意是表示一组数据的集合，它</span><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 11pt; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">和普通变量一样，都用来指代一块内存</span></span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">，但在使用过程中，数组名有时候会转换为指向数据集合的指针（地址），而不是表示数据集合本身。</span></div></li><li><div><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">数据集合包含了多份数据，直接使用一个集合没有明确的含义，将数组名转换为指向数组的指针后，可以很容易地访问其中的任何一份数据，使用时的语义更加明确。</span></div></li></ul><li><div><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 12pt; color: rgb(173, 0, 0); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">2、C语言标准还规定，数组下标与指针的偏移量相同。</span></span></div></li><ul><li><div><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">通俗地理解，就是对数组下标的引用总是可以写成“一个指向数组的起始地址的指针加上偏移量”。</span></div></li><li><div><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">假设现在有一个数组 a 和指针变量 p，它们的定义形式为：</span></div></li></ul></ul><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 11pt;">int a = {1, 2, 3, 4, 5}, *p, i = 2;</font></div></div><ul><ul><li><div><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">读者可以通过以下任何一种方式来访问 a[i]：</span></div></li></ul></ul><div><span style="font-size: 11pt; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;;">                  </span><span style="font-size: 11pt; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;;"><img src="9_指针（2）_files/Image [3].png" type="image/png" data-filename="Image.png" width="303"/></span></div><ul><ul><li><div><span style="font-size: 14.6667px;"><span style="font-size: 14.6667px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;; font-weight: bold;">取下标操作符 [ ]</span></span></div></li><li><div><span style="font-size: 11pt; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(255, 122, 116); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">对数组的引用</span> <span style="background-color: rgb(255, 250, 165); font-size: 11pt; color: rgb(255, 122, 116); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;-evernote-highlight:true;">a[i]</span> <span style="font-size: 11pt; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(255, 122, 116); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">在编译时总是被编译器改写成 </span><span style="font-size: 11pt; color: rgb(255, 122, 116); font-family: &quot;Helvetica Neue&quot;;"><span style="background-color: rgb(255, 250, 165); font-size: 11pt; color: rgb(255, 122, 116); font-family: &quot;Helvetica Neue&quot;;-evernote-highlight:true;">*(a+i)</span> </span><font style="font-size: 11pt;"><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-size: 11pt; color: rgb(255, 122, 116); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">的形式，C语言标准也要求编译器必须具备这种行为</span></font><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(255, 122, 116); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">。</span></div></li><li><div><font style="font-size: 11pt;"><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-size: 11pt; color: rgb(255, 122, 116); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">取下标操作符 </span><span style="font-size: 11pt; color: rgb(255, 122, 116); font-family: &quot;Helvetica Neue&quot;;">[ ] </span><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-size: 11pt; color: rgb(255, 122, 116); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">是建立在指针的基础上</span></font><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">，</span><span style="font-size: 14.6667px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;;">可以将取下标操作符 [ ] 前面的标识符当做指针来看待。</span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">它的作用是使一个指针和一个整数相加，产生出一个新的指针，然后从这个新指针（新地址）上取得数据；</span></div></li><li><div><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">取下标操作符的两个操作数是可以交换的，它并不在意操作数的先后顺序，就像在加法中 3+5 和 5+3 并没有什么不一样。以上面的数组 a 为例，如果希望访问第 3 个元素，那么可以写作 </span><span style="font-size: 11pt; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;;"><span style="background-color: rgb(255, 250, 165); font-size: 11pt; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;;-evernote-highlight:true;">a[3]</span> </span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">，也可以写作 </span><span style="font-size: 11pt; background-color: rgb(255, 250, 165); color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;;-evernote-highlight:true;">3[a]</span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">，这两种形式都是正确的，只不过后面的形式从不曾使用，它除了可以把初学者搞晕之外，实在没有什么实际的意义。</span></div></li><ul><li><div><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(249, 249, 249); color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">a[3] 等价于 *(a + 3)，3[a] 等价于 *(3 + a)，仅仅是把加法的两个操作数调换了位置。</span></div></li><li><div><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">使用下标时，编译器会自动把下标的步长调整到数组元素的大小。数组 a 中每个元素都是 int 类型，长度为 4 个字节，那么</span><span style="display: inline-block; font-size: 14px; border: 1px solid rgb(221, 221, 221); background: rgb(246, 246, 246); border-radius: 2px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(51, 51, 51); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">a[i+1]</span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">和</span><span style="display: inline-block; font-size: 14px; border: 1px solid rgb(221, 221, 221); background: rgb(246, 246, 246); border-radius: 2px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(51, 51, 51); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">a[i]</span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">在内存中的距离是 4（而不是 1）。</span></div></li></ul></ul></ul><div><span style="font-size: 11pt;"><br/></span></div><ul><li><div><font style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(173, 0, 0); font-family: &quot;Helvetica Neue&quot;;">3、C</span><span style="font-size: 12pt; color: rgb(173, 0, 0); font-family: &quot;Helvetica Neue&quot;;">语言标准规定，作为“类型的数组”的形参应该调整为“类型的指针”</span><span style="font-size: 12pt; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;;">。在函数形参定义这个特殊情况下，编译器必须把数组形式改写成指向数组第 0 个元素的指针形式。编译器只向函数传递数组的地址，而不是整个数组的拷贝。</span></font></div></li><ul><li><div><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">这种隐式转换意味着下面三种形式的函数定义是完全等价的：</span></div></li></ul></ul><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 11pt;">void func(int *p_arr){......}</font></div><div><font style="font-size: 11pt;">void func(int arr[]){......}</font></div><div><font style="font-size: 11pt;">void func(int arr[5]){......}</font></div></div><ul><ul><li><div><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">在函数内部，p_arr 会被转换成一个指针变量，编译器为 p_arr 分配 4 个字节的内存，用 sizeof(p_arr) 求得的是指针变量的长度，而不是数组长度。要想在函数内部获得数组长度必须额外增加一个参数，在调用函数之前求得数组长度。</span></div></li><li><div><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">参数传递是一次赋值的过程，赋值也是一个表达式，函数调用时不管传递的是数组名还是数组指针，效果都是一样的，相当于给一个指针变量赋值。</span></div></li></ul></ul><div><span style="font-size: 11pt;"><br/></span></div><ul><ul><li><div><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">把作为形参的数组和指针等同起来是出于效率方面的考虑。数组是若干类型相同的数据的集合，数据的数目没有限制，可能只有几个，也可能成千上万，如果要传递整个数组，无论在时间还是内存空间上的开销都可能非常大。而且绝大部分情况下，我们其实并不需要整个数组的拷贝，我们只想告诉函数在那一时刻对哪个特定的数组感兴趣。</span></div></li></ul></ul><div><span style="font-size: 11pt;"><br/></span></div><ul><li><div><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 12pt; color: rgb(173, 0, 0); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">4、对指针进行加法（减法）运算时，它前进（后退）的步长与它指向的数据类型有关。</span></span></div></li></ul><div><span style="font-size: 11pt;"><br/></span></div><div><span style="font-size: 11pt;"><br/></span></div><div><span style="font-size: 11pt;"><br/></span></div><div><span style="font-size: 16px;">【11 </span><a href="http://c.biancheng.net/view/2020.html" style="font-size: 16px;">指针数组（数组每个元素都是指针）</a><span style="font-size: 16px;">】</span></div><ul><li><div><span style="font-size: 16px;"><span style="font-size: 16px; font-weight: bold;">指针数组：</span></span> <span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">如果一个数组中的所有元素保存的都是</span><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 11pt; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">指针</span></span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">，那么我们就称它为</span><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 11pt; color: rgb(0, 128, 0); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">指针数组</span></span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">。</span></div></li></ul><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-size: 14.6667px;">//指针数组的定义形式一般为：</span></div><div><span style="font-size: 14.6667px;">dataType *arrayName[length];      //等价于 dataType *<span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">(</span>arrayName[length]<span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">)</span>;</span></div></div><ul><ul><li><div><span style="font-size: 12pt;">[ ] </span> <span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">的优先级高于</span> <span style="font-size: 12pt;">*</span> <span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">，该定义的形式应该理解为：</span><span style="background-color: rgb(255, 250, 165); font-size: 14px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;-evernote-highlight:true;">dataType *( arrayNam[ length ]);</span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;"> </span> <span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">括号里面说明这是一个长度为 length，名为 arrayName 的数组，括号外面说明<span style="background-color: rgb(255, 250, 165); font-size: 14px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;-evernote-highlight:true;">每个元素的类型为 </span></span><span style="font-size: 11pt; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;;"><span style="background-color: rgb(255, 250, 165); font-size: 11pt; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;;-evernote-highlight:true;">dataType *</span> 。</span></div></li><li><div><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">除了每个元素的数据类型不同，指针数组和普通数组在其他方面都是一样的，下面是一个简单的例子：</span></div></li></ul></ul><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 11pt;">#include &lt;stdio.h&gt;</font></div><div><font style="font-size: 11pt;">int main() {</font></div><div><font style="font-size: 11pt;">       int a = 16, b = 932, c = 100;</font></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;">       //定义一个指针数组</font></div><div><font style="font-size: 11pt;">       int *arr[3] = { &amp;a, &amp;b, &amp;c };</font></div><div><font style="font-size: 11pt;">       //定义一个指向 指针数组 的指针</font></div><div><font style="font-size: 11pt;">       <font color="#AD0000">int **parr = arr;</font> <span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">//理解为 int *(*parr)，理解为变量parr是一个指针，它所指向的地址上存放的也是一个指针，类型为int *。</span></font></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;">       printf(&quot;a=%d, b=%d, c=%d\n&quot;, *arr[0], *arr[1], *arr[2]);</font></div><div><font style="font-size: 11pt;">       printf(&quot;a=%d, b=%d, c=%d\n&quot;, **(parr</font><font style="font-size: 11pt;"> + 0), **(parr + 1), **(parr + 2));</font></div><div><font style="font-size: 11pt;">       printf(&quot;&amp;a=%#X, &amp;b=%#X, &amp;c=%#X\n&quot;, *parr, *(parr + 1), *(parr + 2));</font></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;">       return 0;</font></div><div><font style="font-size: 11pt;">}</font></div><div><font style="font-size: 11pt;"><br/></font></div><div><span style="font-size: 14.6667px;">运行结果为：</span></div><div>a=16, b=932, c=100</div><div>a=16, b=932, c=100</div><div>&amp;a=0XEFFD68, &amp;b=0XEFFD5C, &amp;c=0XEFFD50</div></div><ul><ul><ul><li><div><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">parr 是指向数组 arr 的指针，确切地说是指向 arr 第 0 个元素的指针，它的定义形式应该理解为 </span><span style="font-size: 11pt; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;;">int *(*parr) </span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">，括号中的 </span><span style="font-size: 11pt; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;;">* </span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">表示 parr 是一个指针，括号外面的 </span><span style="font-size: 11pt; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;;">int * </span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">表示 parr 指向的数据的类型。arr 第 0 个元素的类型为 int *，所以在定义 parr 时要加两个 *。</span></div></li></ul></ul></ul><div><font style="font-size: 12pt;"><br/></font></div><ul><ul><li><div><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">指针数组还可以和字符串数组结合使用，请看下面的例子：</span></div></li></ul></ul><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 11pt;">#include &lt;stdio.h&gt;</font></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;">int main() {</font></div><div><font style="font-size: 11pt;">       char *str[3] = {</font></div><div><font style="font-size: 11pt;">              &quot;c.biancheng.net&quot;,</font></div><div><font style="font-size: 11pt;">              &quot;C语言中文网&quot;,</font></div><div><font style="font-size: 11pt;">              &quot;C Language&quot;</font></div><div><font style="font-size: 11pt;">       };</font></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;">       printf(&quot;%s\n%s\n%s\n&quot;, str[0], str[1], str[2]);</font></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;">       return 0;</font></div><div><font style="font-size: 11pt;">}</font></div><div><font style="font-size: 11pt;"><br/></font></div><div><font face="Monaco"><span style="font-size: 14.6667px;">运行结果：</span></font></div><div>c.biancheng.net</div><div>C语言中文网</div><div>C Language</div></div><ul><ul><ul><li><div><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 11pt; color: rgb(173, 0, 0); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">需要注意的是，字符（指针）数组 str 中存放的是字符串的首地址，不是字符串本身，字符串本身位于其他的内存区域（常量区？），和字符数组是分开的</span></span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">。</span></div></li><li><div><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">也只有当指针数组中每个元素的类型都是 </span><span style="font-size: 11pt; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;;">char * </span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">时，才能像上面那样给指针数组赋值，其他类型不行。</span></div></li></ul></ul></ul><div><font style="font-size: 11pt;"><br/></font></div><ul><ul><ul><li><div><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">为了便于理解，可以将上面的字符串数组改成下面的形式，它们都是等价的。</span></div></li></ul></ul></ul><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>#include &lt;stdio.h&gt;</div><div>int main(){</div><div>    char *str0 = &quot;c.biancheng.net&quot;;</div><div>    char *str1 = &quot;C语言中文网&quot;;</div><div>    char *str2 = &quot;C Language&quot;;</div><div>    char *str[3] = {str0, str1, str2};</div><div>    </div><div>    printf(&quot;%s\n%s\n%s\n&quot;, str[0], str[1], str[2]);</div><div>    return 0;</div><div>}</div></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;">【12 </span><span style="font-size: 12pt;"><a href="http://c.biancheng.net/view/vip_2021.html" style="font-size: 12pt;">一道题目玩转 指针数组 和 二级指针</a></span><span style="font-size: 12pt;">】</span></div><ul><li><div><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">（这道题目的代码很有意思，如果对指针数组和二级指针的知识点不牢固，很容易产生混淆。这里只给出我未掌握的知识点的那部分代码的解释，其它的解释和另一份等价的代码请看链接原文）</span></div></li></ul><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 11pt;">#include &lt;stdio.h&gt;</font></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;">int main() {</font></div><div><font style="font-size: 11pt;">       char *lines[5] = {</font></div><div><font style="font-size: 11pt;">              &quot;COSC1283/1284&quot;,</font></div><div><font style="font-size: 11pt;">              &quot;Programming&quot;,</font></div><div><font style="font-size: 11pt;">              &quot;Techniques&quot;,</font></div><div><font style="font-size: 11pt;">              &quot;is&quot;,</font></div><div><font style="font-size: 11pt;">              &quot;great fun&quot;</font></div><div><font style="font-size: 11pt;">       };</font></div><div><font style="font-size: 11pt;">       <font color="#AD0000">char *str1</font> = lines[1]; <span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">//<font color="#AD0000"><b>字符串</b></font>，lines[1]表示lines中第0个元素，它是字符串&quot;COSC1283/1284&quot;的首个字符的地址</span></font></div><div><font style="font-size: 11pt;">       char *str3 = *(lines + 3); <span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">//lines + 3 表示lines中第3个元素的地址，*(lines + 3)  才是表示lines中第3个元素，它是字符串&quot;is&quot;的首个字符的地址</span></font></div><div><font style="font-size: 11pt;">       </font></div><div><font style="font-size: 11pt;">       <font color="#AD0000">char c1</font> = *(*(lines + 4) + 6); <span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">//<font color="#AD0000"><b>单个字符</b></font></span></font></div><div><font style="font-size: 11pt;">       char c2 = (*lines + 5)[5]; <span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">//lines 为数组lines[5]的首元素的地址，</span></font></div><div><font style="font-size: 11pt;">                                  <span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">//*lines 才为数组lines[5]的首元素，即</span></font><font style="font-size: 11pt;background-color: rgb(255, 250, 165);-evernote-highlight:true;">&quot;COSC1283/1284&quot;的首个字符的地址，</font></div><div><font style="font-size: 11pt;">                                  <span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">//*lines + 5 则为</span></font><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;"><font style="font-size: 11pt;">&quot;COSC1283/1284&quot;的第5个元素<b>的地址</b>，相当于&quot;</font><font style="font-size: 11pt;">283/1284&quot;</font><font style="font-size: 11pt;">的首地址</font></span></div><div><font style="font-size: 11pt;"><span style="font-weight: bold;">    </span><span style="font-weight: bold;">    </span><span style="font-weight: bold;">    </span><span style="font-weight: bold;">    </span><span style="font-weight: bold;">    </span><span style="font-weight: bold;">    </span><span style="font-weight: bold;">    </span><b>     </b> <span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">//(*lines + 5)[5] 等价于 *(*lines + 5 + 5)，</span></font><font style="font-size: 11pt;background-color: rgb(255, 250, 165);-evernote-highlight:true;"><font>表示</font><font>&quot;COSC1283/1284&quot;的第10个字符</font></font></div><div><font style="font-size: 11pt;"><font>                                  <span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">//注意，在前面说过，<b><font color="#000000">对于取下标操作符 []，</font></b></span></font></font><font color="#000000" style="font-size: 11pt;background-color: rgb(255, 250, 165);-evernote-highlight:true;"><b>对数组的引用 a[i] 在编译时总是被编译器改写成 *(a+i) 的形式</b></font></div><div><font style="font-size: 11pt;">       char c3 = *lines[0] + 2; <span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">//注意，</span></font><font style="font-size: 11pt;background-color: rgb(255, 250, 165);-evernote-highlight:true;"><b><font color="#000000">[]的优先级高于*</font></b>，所以 *lines[0] + 2 的解释顺序为</font></div><div><font><span style="font-size: 11pt;">    </span><span style="font-size: 11pt;">    </span><span style="font-size: 11pt;">    </span><span style="font-size: 11pt;">    </span><span style="font-size: 11pt;">    </span><span style="font-size: 11pt;">    </span><span style="font-size: 11pt;">        <span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">//lines[0] 为数组lines[5]的首元素，</span></span><font style="font-size: 11pt;background-color: rgb(255, 250, 165);-evernote-highlight:true;">即</font></font><font style="font-size: 11pt;background-color: rgb(255, 250, 165);-evernote-highlight:true;">&quot;COSC1283/1284&quot;的首个字符的地址，</font></div><div><font><span style="font-size: 11pt;">    </span><span style="font-size: 11pt;">    </span><span style="font-size: 11pt;">    </span><span style="font-size: 11pt;">    </span><span style="font-size: 11pt;">    </span><span style="font-size: 11pt;">    </span><span style="font-size: 11pt;">       </span> <font style="font-size: 11pt;">//*lines[0] 则为</font></font><font style="font-size: 11pt;">&quot;COSC1283/1284&quot;的首个字符，即&quot;C&quot;，&quot;C&quot; + 2 转换为字符类型，即&quot;E&quot;</font></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;">       printf(&quot;str1 = %s\n&quot;, str1);</font></div><div><font style="font-size: 11pt;">       printf(&quot;str2 = %s\n&quot;, str3);</font></div><div><font style="font-size: 11pt;">       printf(&quot;  c1 = %c\n&quot;, c1);</font></div><div><font style="font-size: 11pt;">       printf(&quot;  c2 = %c\n&quot;, c2);</font></div><div><font style="font-size: 11pt;">       printf(&quot;  c3 = %c\n&quot;, c3);</font></div><div><font style="font-size: 11pt;">       return 0;</font></div><div><font style="font-size: 11pt;">}</font></div><div><font style="font-size: 11pt;"><br/></font></div><div><span style="font-size: 14.6667px;">运行结果：</span></div><div>str1 = Programming</div><div>str2 = is</div><div>  c1 = f</div><div>  c2 = 2</div><div>  c3 = E</div></div><ul><ul><li><div><span style="font-size: 11pt; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;;">char *lines[5] </span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">定义了一个指针数组，它的每个元素的类型都是 </span><span style="font-size: 11pt; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;;">char * </span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">。</span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(178, 34, 34); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">在表达式中使用 lines 时，它会转换为一个类型为 </span><span style="font-size: 11pt; background-color: rgb(255, 250, 165); color: rgb(178, 34, 34); font-family: &quot;Helvetica Neue&quot;;-evernote-highlight:true;">char **</span><span style="font-size: 11pt; color: rgb(178, 34, 34); font-family: &quot;Helvetica Neue&quot;;"> </span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(178, 34, 34); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">的指针，这样</span></div></li><ul><li><div><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(178, 34, 34); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;"> </span><span style="font-size: 11pt; color: rgb(178, 34, 34); font-family: &quot;Helvetica Neue&quot;;">*lines </span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(178, 34, 34); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">就表示一个指向字符的指针，而</span></div></li><li><div><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(178, 34, 34); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;"> </span><span style="font-size: 11pt; color: rgb(178, 34, 34); font-family: &quot;Helvetica Neue&quot;;">**lines </span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(178, 34, 34); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">表示一个具体的字符，这一点很重要，读者一定要明白。</span></div></li></ul><li><div><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(178, 34, 34); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">注意：lines 是二级指针，*(lines+i) 的值是一级指针，**(lines+i) 才是具体的字符。</span></div></li></ul></ul><div><br/></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;">【13 </span><span style="font-size: 12pt;"><a href="http://c.biancheng.net/view/2022.html" style="font-size: 12pt;">二维数组指针（指向二维数组指针）</a></span><span style="font-size: 12pt;">】</span></div><ul><li><div><span style="font-size: 16px;"><span style="font-size: 16px; font-weight: bold;">二维数组：</span></span> <span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">在概念上是二维的，有行和列，但在内存中所有的数组元素都是连续排列的，</span> <span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">它们之间没有“缝隙”。</span></div></li><ul><li><div><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">C语言中的二维数组是按行排列的。</span></div></li><li><div><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">C语言允许把一个二维数组分解成多个一维数组来处理。（例如 arr[m][n]，可以分解成 m 个一维数组，每个一维数组包含了 n 个元素）</span></div></li></ul></ul><div><font style="font-size: 12pt;"><br/></font></div><ul><li><div><span style="font-size: 16px;"><span style="font-size: 16px; font-weight: bold;">二维数组指针：</span>是指向二维数组的（一个）指针（变量）</span></div></li><li><div><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">为了更好的理解 <span style="font-size: 14px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">指针 </span></span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">和 </span><span style="font-size: 14px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">二维数组 </span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">的关系，我们先来定义一个指向 二维数组 a 的指针变量 p：</span></div></li></ul><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 11pt;">int a[3][4] = { {0, 1, 2, 3}, {4, 5, 6, 7}, {8, 9, 10, 11} }; </font></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;"><b>int (*p)[4] = a;</b></font></div></div><ul><ul><li><div><font style="font-size: 11pt;"><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-size: 11pt; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">括号中的 * </span><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-size: 11pt; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">表明 p 是一个指针，它指向一个数组，数组的类型为 </span><span style="font-size: 11pt; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;;">int [4] </span><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-size: 11pt; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">，这正是 a 所包含的每个一维数组的类型。</span></font></div></li><ul><li><div><span style="font-size: 11pt; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;;">[ ]</span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;"> 的优先级高于 * </span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">，( ) </span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">是必须要加的，如果赤裸裸地写作 </span><span style="font-size: 11pt; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;;"><span style="background-color: rgb(255, 250, 165); font-size: 11pt; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;;-evernote-highlight:true;">int *p[4]</span> </span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">，那么应该理解为 </span><span style="font-size: 11pt; background-color: rgb(255, 250, 165); color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;;-evernote-highlight:true;">int *(p[4])</span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">，p 就成了一个指针数组，而不是二维数组指针。</span></div></li><li><div><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">对于数组 a，它可以分解成三个一维数组，即 a[0]、a[1]、a[2]。每一个一维数组又包含了 4 个元素。</span></div></li><li><div><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(249, 249, 249);"><span style="background-color: rgb(249, 249, 249); font-size: 12pt; color: rgb(173, 0, 0); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">为了能够通过指针来遍历数组元素，在定义数组指针时需要进行降维处理，例如三维数组指针实际指向的数据类型是二维数组，二维数组指针实际指向的数据类型是一维数组，一维数组指针实际指向的是一个基本类型；在表达式中，数组名也会进行同样的转换（下降一维）。</span></span></div></li></ul></ul></ul><div><span style="font-size: 11pt;"><br/></span></div><ul><ul><li><div><span style="font-size: 11pt; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;;">p </span><font style="font-size: 11pt;"><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-size: 11pt; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">指向数组 a 的开头，也即第 0 行；</span></font><span style="font-size: 11pt; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;;">p+1 </span><span style="font-size: 11pt; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">会使得指针指向二维数组的下一行，</span><span style="font-size: 11pt; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;;">p-1 </span><span style="font-size: 11pt; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">会使得指针指向数组的上一行。</span></div></li><ul><li><div><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 14px; color: rgb(173, 0, 0); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">对指针进行加法（减法）运算时，它前进（后退）的步长与它指向的数据类型有关</span></span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">，</span></div></li><li><div><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">p 指向的数据类型是</span><font style="font-size: 11pt;"><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-size: 11pt; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;"> </span></font><span style="font-size: 11pt; background-color: rgb(255, 250, 165); color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;;-evernote-highlight:true;">int [4] </span><font style="font-size: 11pt;"><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-size: 11pt; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">，</span></font> <span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">那么</span><font style="font-size: 11pt;"><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-size: 11pt; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;"> </span></font><span style="font-size: 11pt; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;;">p+1 </span> <span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">前进 4×4 = 16 个字节，</span><font style="font-size: 11pt;"><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-size: 11pt; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">p-1 </span></font> <span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">就后退 16 个字节，这正好是数组 a 所包含的每个一维数组的长度。</span></div></li></ul></ul><div><span style="font-size: 11pt;"><br/></span></div><ul><li><div><span style="font-size: 11pt; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;;">*(p+1) </span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">表示取地址上的数据，也就是整个第 1 行数据。</span><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 11pt; color: rgb(173, 0, 0); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">注意是一行数据，是多个数据，不是第 1 行中的第 0 个元素</span></span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">，下面程序的运行结果有力地证明了这一点：</span></div></li></ul></ul><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 11pt;">#include &lt;stdio.h&gt;</font></div><div><font style="font-size: 11pt;">int main() {</font></div><div><font style="font-size: 11pt;">       int a[3][4] = { { 0, 1, 2, 3 },{ 4, 5, 6, 7 },{ 8, 9, 10, 11 } };</font></div><div><font style="font-size: 11pt;">       <span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">int(*p)[4] = a;</span></font></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;">       printf(&quot;length of *p: %d\n&quot;, sizeof(*p));</font></div><div><font style="font-size: 11pt;">       printf(&quot;length of *(p+1): %d\n&quot;, sizeof(*(p+1))); <span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">//*(p+1)单独使用时表示第1行数据，sizeof()是操作符，这里sizeof(*(p+1))仍然算是*(p+1)单独使用</span></font></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;">       return 0;</font></div><div><font style="font-size: 11pt;">}</font></div><div><font style="font-size: 11pt;"><br/></font></div><div><span style="font-size: 14.6667px;">运行结果：</span></div><div>length of *p: 16</div><div>length of *(p+1): 16</div></div><ul><ul><li><div><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: &quot;Helvetica Neue&quot;;">①</span> *(p+1)<span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;"> </span><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 11pt; color: rgb(173, 0, 0); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">单独使用时表示的是第 1 行数据</span><span style="font-size: 11pt; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">，②</span></span> <span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 11pt; color: rgb(173, 0, 0); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">放在表达式中会被转换为第 1 行数据的首地址，也就是第 1 行第 0 个元素的地址</span></span><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-size: 11pt; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">，</span></div></li><ul><li><div><span style="font-size: 14px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif;">就像一维数组的名字，在定义时或者和 sizeof、&amp; 一起使用时才表示整个数组，出现在表达式中就会被转换为指向数组第 0 个元素的指针。</span></div></li><li><div><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">所以，</span> *(p+1)+1 <span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">表示第 1 行第 1 个元素的地址。</span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">因为使用整行数据没有实际的含义，编译器遇到这种情况都会转换为指向该行第 0 个元素的指针。</span></div></li><li><div><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(178, 34, 34); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">数组名 a 在表达式中也会被转换为和 p 等价的指针！</span></div></li></ul><li><div><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">根据上面的结论，可以很容易推出以下的等价关系：</span></div></li></ul></ul><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 10pt;">a+i == p+i</font></div><div><font style="font-size: 10pt;">a[i] == p[i] == *(a+i) == *(p+i)</font></div><div><font style="font-size: 10pt;">a[i][j] == p[i][j] == *(a[i]+j) == *(p[i]+j) == *(*(a+i)+j) == *(*(p+i)+j)</font></div></div><div><span style="font-size: 11pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>#include &lt;stdio.h&gt;</div><div>int main() {</div><div>       //C语言标准规定，当数组名作为数组定义的标识符、sizeof 或 &amp; 的操作数时，它才表示整个数组本身，</div><div>       //在其他的表达式中，数组名会被转换为指向该数组的指针。</div><div>       //一维数组名作为指针，它的值为第 0 个元素的地址，指向的是一维数组的第 0 个元素。</div><div>       //二维数组名作为指针，它的值为第 0 行的首地址，  指向的是二维数组的第 0 行整一行。</div><div>       //二维数组的组成单位是一维数组/行    ， 故二维数组指针指向的是二维数组的行  ，其加减法是按照行的长度（元素的数据类型对应的长度 * 一行的元素个数）来计算的。</div><div>       //一维数组的组成单位是单个的数据/元素， 故一维数组指针指向的是一维数组的元素，其加减法是按照元素的长度（元素的数据类型对应的长度）来计算的</div><div>       </div><div>       //对数组的引用 a[i] 在编译时总是被编译器改写成 *(a+i) 的形式，C语言标准也要求编译器必须具备这种行为。</div><div>       int a[3][4] = { { 0, 1, 2, 3 },{ 4, 5, 6, 7 },{ 8, 9, 10, 11 } }; //定义二维数组 a，这里 a 是二维数组定义的标识符，所以表示整个数组本身。</div><div>       int(*p)[4] = a; //等价于int(*p)[4]; p = a;</div><div>                                    //p 为二维数组指针，指向一个一维数组（/二维数组的行），数组的类型为int [4]，这正是 a 所包含的每个一维数组的类型。</div><div>                                    //p 的值为二维数组 a 的第 0 行的起始地址，即 a[0]行的首地址，它指向a[0]行。</div><div>                                    //又因为 p   为二维数组指针，指向二维数组 a 的行（这里具体所指向的数据类型为 int [4]）,</div><div>                                    //所以 p+n 也为二维数组指针，指向二维数组 a 的第 n  行（即a[n]行），p+n 的值为 a[n] 这一行首地址。</div><div>                                    //在表达式 p = a 中，a 亦是作为与 p 等价的二维数组指针来使用，其值为 a[0]行的首地址，指向 a 的第 0 行（而不是作为整个二维数组本身？）；</div><div>                                    //所以 a+n 也是二维数组指针，指向二维数组 a 的第 n  行（即a[n]行），a+1 的值为 a[n] 这一行的首地址。</div><div>       </div><div>       printf(&quot;byte counts of a / sizeof(a) / length of a: %d\n&quot;, sizeof(a));                  //48，a 作为sizeof()的操作数，表示整个数组本身</div><div>       printf(&quot;element counts of a:                        %d\n\n&quot;, sizeof(a) /  sizeof(int)); //12</div><div>       printf(&quot;length of *a:             %d\n&quot;, sizeof(*a));     //16，a 作为二维数组指针指向 a[0] 行，其值为 a[0] 行的首地址，*a 表示a[0]这个一维数组。</div><div>       printf(&quot;length of a[0]:           %d\n\n&quot;, sizeof(a[0])); //16，a[0]行这个一维数组。a[0] 相当于 *(a+0)，相当于 *a。</div><div>       printf(&quot;**a=%d\n\n&quot;, **a);</div><div>       printf(&quot;length of int variable p: %d\n&quot;, sizeof(p));      //4， p 虽然是一个指向数据类型为 int [4] 的数组 的指针变量（这里只是 p 所指向的数据的类型），</div><div>                                                                 //    它本身的类型还是  int *, 故 sizeof(p) 的值为 4，表示 4 个字节。</div><div>       printf(&quot;length of *p:             %d\n&quot;, sizeof(*p));     //16，p   为指向 a[0]  行的指针，它的值为 a[0] 行的首地址，所以 *p 表示（提取了）a[0] 行这个一维数组。</div><div>       printf(&quot;length of *(p+1):         %d\n&quot;, sizeof(*(p+1))); //16，p+1 为指向 a[1]  行的指针，它的值为 a[1] 行的首地址，所以 *(p+1) 表示（提取了）a[1] 行这个一维数组。</div><div>       printf(&quot;length of p+1:            %d\n&quot;, sizeof(p + 1));  //4，p+1 为指向 a[1]  行的指针，它本身的类型还是 int *，故 sizeof(p+1) 的值为 4，表示 4 个字节。</div><div>       printf(&quot;length of a+1:            %d\n\n\n&quot;, sizeof(a + 1)); //4，这里，表达式  a+1 中，把 a 当作 p 看待。故 sizeof(a+1) = sizeof(p+1)。</div><div>       printf(&quot; a+1      = %#X\n&quot;, a + 1);    // a+1  为指向a[1] 行的指针，它的值为  a[1] 行的首地址。</div><div>       printf(&quot; a        = %#X\n&quot;, a);        // a    为二维数组指针，指向二维数组 a 的  a[0] 行，其值为 a[0] 行的首地址。</div><div>       printf(&quot;*a        = %#X\n&quot;, *a);       //*a    为二维数组指针 a 所指向的 a[0]  行，表示 a[0] 行这个一维数组。</div><div>                                              //      也看做 a[0] 这个一维数组的数组名，作为指针表示指向一维数组 a[0] 的首元素，其值为a[0]首元素的地址。</div><div>       printf(&quot; a[0]     = %#X\n&quot;, a[0]);     // a[0] 是一维数组 a[0]的数组名，这里表示一维数组指针，指向一维数组 a[0] 的首元素，其值为a[0]首元素的地址。</div><div>       printf(&quot;&amp;a[0]     = %#X\n&quot;, &amp;a[0]);    //&amp;a[0] 表示一维数组 a[0] 的首地址。</div><div>       printf(&quot;*a[0]     = %d\n&quot;, *a[0]);     //0 （等价于 *(a[0]) 等价于 *(*(a+0)) 等价于 a[0][0]，为一维数组 a[0] 的首元素。这里a[0]或*(a+0)表示一维数组a[0]的指针。）</div><div>       printf(&quot;*a[1]     = %d\n&quot;, *a[1]);     //4 （等价于 *(a[1]) 等价于 *(*(a+1)) 等价于 a[1][0]，为一维数组 a[1] 的首元素。这里a[1]或*(a+1)表示一维数组a[1]的指针。）</div><div>       printf(&quot;*a[2]     = %d\n&quot;, *a[2]);     //8 （等价于 *(a[2]) 等价于 *(*(a+2)) 等价于 a[2][0]，为一维数组 a[2] 的首元素。这里a[2]或*(a+2)表示一维数组a[2]的指针。）</div><div>       printf(&quot;*(a[2]+1) = %d\n&quot;, *(a[2]+1)); //9 （等价于 *(*(a+2)+1)） 等价于  a[2][1]，为一维数组 a[2] 的第 1 个元素。这里a[2]或*(a+2)表示一维数组a[2]的指针。指向a[2]的首元素，</div><div>                                              //    其值为a[2]首元素的地址。</div><div>                                              //    因为这里a[2]或*(a+2)表示一维数组指针，所以a[2]+1或*(a+2)+1是指向一维数组a[2]的下一个元素。）</div><div>       printf(&quot;(*a)[0]   = %d\n&quot;, (*a)[0]);   //0 （*a 等价于 *(a+0) 等价于 a[0]，故  (*a)[0] 等价于 (a[0])[0] 等价于 a[0][0]。</div><div>                                              //    *a和a[0] 也可看作一维数组 a[0] 的数组名，这里表示一维数组指针，其值为一维数组 a[0] 的首地址，后面的[0]表示指针加 0 后取所指向的元素。</div><div>                                              //    *a 和  a[0] 也可看作一维数组 a[0] 的数组名，数组名后面跟着[0]，表示一维数组 a[0] 的第 0 个元素。）</div><div>       printf(&quot;(*a)[3]   = %d\n&quot;, (*a)[3]);   //3</div><div>       printf(&quot;(*a)[4]   = %d\n&quot;, (*a)[4]);   //4</div><div>       printf(&quot;(*a)[11]  = %d\n&quot;, (*a)[11]);  //11 （*a 等价于 *(a+0) 等价于 a[0]， (*a)[0] 等价于 (a[0])[11] 等价于 a[0][11]。</div><div>                                              //     *a和a[0]也可看作一维数组a[0]的数组名，这里表示一维数组指针，其值为一维数组 a[0] 的首地址，后面的[11]表示指针加 11 后取所指向的元素。</div><div>                                              //     *a  和 a[0] 也可看作一维数组 a[0] 的数组名，数组名后面跟着[11]，表示一维数组 a[0] 的第 11 个元素。</div><div>                                              //     而实际上一维数组 a[0] 只有 4 个元素，它的第 11 个元素已经越界了，但正好对应着二维数组 a 的第  11 个元素，即 a[3][4]。）</div><div>       printf(&quot;(a[0])[0] = %d\n&quot;, (a[0])[0]); //0 （等价于 (*(a+0))[0]， 即 (*a)[0]。）</div><div>       printf(&quot;(a[0])[11]= %d\n&quot;, (a[0])[11]);//11（等价于 (*(a+0))[11]，即 (*a)[11]。）</div><div>       printf(&quot;(a[1])[0] = %d\n&quot;, (a[1])[0]); //4 （等价于 (*(a+1))[0]）。</div><div>       printf(&quot;(a[1])[7] = %d\n&quot;, (a[1])[7]); //11（等价于 (*(a+1))[7]）。</div><div>       printf(&quot;&amp;a[0][0]  = %#X\n\n&quot;, &amp;a[0][0]); //&amp;a[0][0] （元素 地址）表 a 的第 0 行第 0 个元素的地址（ &amp;(a[0][0]) ），或：行 a[0] 的第 0 个元素的地址（ &amp;(a[0])[0] ）。</div><div>       </div><div>       printf(&quot;   p      = %#X\n&quot;, p);       //    p     二维数组指针，指向二维数组 a  的 a[0] 行，其值为 a[0] 行首地址。</div><div>       printf(&quot;  *p      = %#X\n&quot;, *p);      //   *p     a[0] 行/一维数组，数组名 *p 表示一维数组指针，指向一维数组 a[0] 的首元素，其值为一维数组 a[0] 的首元素地址。</div><div>       printf(&quot;&amp;**p      = %#X\n\n&quot;, &amp;**p);  // &amp;**p     一维数组 a[0] 的首元素的地址，**p 表示 一维数组 a[0] 的首元素。</div><div>       </div><div>       printf(&quot;  p       = %#X\n&quot;, p);         //  p     二维数组指针，指向二维数组 a  的 a[0] 行，其值为 a[0] 行首地址。</div><div>       printf(&quot;  p+1     = %#X\n&quot;, p + 1);     //  p+1   二维数组指针，指向二维数组 a  的 a[1] 行，其值为 a[1] 行首地址</div><div>       printf(&quot;*(p+1)    = %#X\n\n&quot;, *(p + 1));//*(p+1)  a[1] 行/一维数组，数组名  *(p+1) 表示一维数组指针，指向一维数组 a[1] 的首元素，其值为 a[1] 的首元素地址。</div><div>       printf(&quot;*p        = %#X\n&quot;, *p);        // *p     a[0] 行/一维数组，数组名 *p 表示一维数组指针，指向一维数组 a[0] 的首元素，其值为 a[0] 的首元素地址。</div><div>       printf(&quot;*p+1      = %#X\n\n\n&quot;, *p + 1);// *p+1   一维数组名 *p/a[0] 表示一维数组的指针，指向一维数组 *p/a[0] 的第0个元素，指针加1即指向一维数组的第1个元素，</div><div>                                               //        其值为一维数组第1个元素的地址。</div><div>       </div><div>       printf(&quot;(p+1) - p = %d（十进制）\n\n\n&quot;, (p + 1) - p); //虽然二维数组指针 p+1 和  p 相差int[4]，即16个字节的地址距离，但是从指针值的角度来说，还是只相差1。</div><div>       printf(&quot;  *a[0]   = %d\n&quot;, *a[0]);      //等于a[0][0] （a[0]表示一维数组a[0]的指针，指向a[0]的第0个元素。）</div><div>       printf(&quot; **p      = %d\n&quot;, **p);        //等于a[0][0] （*p  表示一维数组a[0]的指针，指向a[0]的第0个元素。）</div><div>       printf(&quot;*(*p+1)   = %d\n&quot;, *(*p + 1));  //等于a[0][1] （(*p + 1) 表示一维数组a[0]的指针加1，指向a[0]的第1个元素。）</div><div><br/></div><div>       //取下标操作符[ ]</div><div>       //对数组的引用 a[i] 在编译时总是被编译器改写成 *(a+i) 的形式，C语言标准也要求编译器必须具备这种行为。</div><div>       //取下标操作符 [ ] 是建立在指针的基础上（可以将取下标操作符 [ ] 前面的标识符当做指针来看待，不管这个标识符是指针变量还是数组名。），</div><div>       //它的作用是使一个指针和一个整数相加，产生出一个新的指针，然后从这个新指针（新地址）上取得数据。</div><div>       printf(&quot;  (p + 1)[0]    = %#X\n&quot;, (p + 1)[0]);    //等于a[1]    解释1：p+1 是二维数组指针，[0]表示指针在二维数组的行间移动0行， 并取新行上的数据， (p+1)[0]即一维数组 a[1]，</div><div>                                                         //            解释2：(p + 1)[0] 等价于 *((p+1)+0) 等价于 *(p+1)，也就是一维数组 a[1]，也表示一维数组 a[1]的指针。</div><div>       printf(&quot;  (p + 1)[0][1] = %d\n&quot;, (p + 1)[0][1]);  //等于a[1][1] （等价于 *(  *((p+1)+0) + 1) 等价于 *( *(p+1) + 1) 等价于 a[1][1]，(p + 1)[0] 看做一维数组a[1]。）</div><div>       printf(&quot;  (a + 1)[0][1] = %d\n&quot;, (a + 1)[0][1]);  //等于a[1][1] （等价于 *(  *((a+1)+0) + 1) 等价于 *( *(p+1) + 1) 等价于 a[1][1]，(a + 1)[0] 看做一维数组a[1]。）</div><div>       printf(&quot;  (p + 1)[1][0] = %d\n&quot;, (p + 1)[1][0]);  //等于a[2][0] （等价于 *(  *((p+1)+1) + 1) 等价于 *( *(p+2) + 1) 等价于 a[2][1]，(p + 1)[1] 看做一维数组a[2]。）</div><div>       printf(&quot;  (p + 2)[0]    = %#X\n&quot;, (p + 2)[0]);    //等于a[2]    （解释参考以上）。</div><div>       printf(&quot;  (p + 2)[0][0] = %d\n&quot;, (p + 2)[0][0]);  //等于a[2][0] （解释参考以上）。</div><div>       printf(&quot; *(p + 2)[0]    = %d\n&quot;, *(p + 2)[0]);    //等于a[2][0]</div><div>       printf(&quot;*((p + 2)[0]+1) = %d\n&quot;, *((p + 2)[0]+1));//等于a[2][1] （等价于  *(a[2]+1) 等价于 a[2][1]）</div><div>       return 0;</div><div>}</div></div><div><span style="font-size: 12pt;">    </span></div><ul><ul><li><div><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">【实例】使用指针遍历二维数组。</span></div></li></ul></ul><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font><font style="font-size: 11pt;">#include &lt;stdio.h&gt;</font></font></div><div style="font-size: 11pt;"><font><br/></font></div><div><font><font style="font-size: 11pt;">int main() {</font></font></div><div><font><font style="font-size: 11pt;">       int a[3][4] = { 0,1,2,3,4,5,6,7,8,9,10,11 };</font></font></div><div><font><font style="font-size: 11pt;">       int(*p)[4] = a;</font></font></div><div><font><font style="font-size: 11pt;">       int i, j;</font></font></div><div><font><font style="font-size: 11pt;">       for (i = 0; i &lt; 3; i++) {</font></font></div><div><font><font style="font-size: 11pt;">              <font>for (j = 0; j &lt; 4; j++) printf(&quot;%2d  &quot;, *(*(p+i)+j));</font></font></font></div><div><font><font style="font-size: 11pt;">              printf(&quot;\n&quot;);</font></font></div><div><font><font style="font-size: 11pt;">       }</font></font></div><div><font><font style="font-size: 11pt;">       return 0;</font></font></div><div><font><font style="font-size: 11pt;">}</font></font></div></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><span style="font-size: 12pt;">【14 </span><span style="font-size: 12pt;"><a href="http://c.biancheng.net/view/2023.html" style="font-size: 12pt;">函数指针（指向函数的指针）</a></span><span style="font-size: 12pt;">】</span></div><ul><li><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">函数指针：</span></span> <span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">一个函数总是占用一段连续的内存区域，</span><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; color: rgb(173, 0, 0); font-size: 11pt;">函数名在表达式中有时也会被转换为该函数所在内存区域的首地址，这和数组名非常类似</span></span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">。我们可以把函数的这个首地址（或称入口地址）赋予一个指针</span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">变量，使指针变量指向函数所在的内存区域，然后通过指针变量就可以找到并调用该函数。这种指针就是</span><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 11pt; color: rgb(0, 128, 0); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">函数指针</span></span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">。</span></div></li><li><div><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 12pt; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">函数指针的定义形式为：</span></span></div></li></ul><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">returnType (*pointerName)(param list);</font></div></div><ul><ul><li><div><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">returnType 为函数返回值类型，</span></div></li><li><div><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">pointerNmae 为指针名称，</span></div></li><li><div><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">param list 为函数参数列表。参数列表中可以同时给出参数的类型和名称，也可以只给出参数的类型，省略参数的名称，这一点和函数原型非常类似。</span></div></li><li><div><span style="font-size: 16px;">注意：</span></div></li><li><div><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">注意 </span><span style="font-size: 11pt; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;;">( ) </span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">的优先级高于 </span><span style="font-size: 11pt; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;;">*</span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">，第一个括号不能省略，如果写作<span style="background-color: rgb(255, 250, 165); font-size: 14px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;-evernote-highlight:true;"> </span></span><span style="font-size: 11pt; background-color: rgb(255, 250, 165); color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;;-evernote-highlight:true;">returnType *pointerName(param list); </span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">就成了函数原型，它表明函数的返回值类型为</span><span style="display: inline-block; font-size: 14px; border: 1px solid rgb(221, 221, 221); background: rgb(246, 246, 246); border-radius: 2px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(51, 51, 51); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">returnType *</span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">。</span></div></li></ul><li><div><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">【实例】用指针来实现对函数的调用。</span><span style="font-size: 16px;"> </span></div></li></ul><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 11pt;">#include &lt;stdio.h&gt;</font></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;">//返回两个数中较大的一个</font></div><div><font style="font-size: 11pt;">int max(int a, int b) {</font></div><div><font style="font-size: 11pt;">       return a &gt; b ? a : b;</font></div><div><font style="font-size: 11pt;">}</font></div><div><font style="font-size: 11pt;">int main() {</font></div><div><font style="font-size: 11pt;">       int x, y, maxval;</font></div><div><font style="font-size: 11pt;">       //定义函数指针</font></div><div><font style="font-size: 11pt;">       int(*pmax)(int, int) = max;  //也可以写作 int (*pmax)(int a, int b)</font></div><div><font style="font-size: 11pt;">       printf(&quot;Please Input two integers: &quot;);</font></div><div><font style="font-size: 11pt;">       scanf(&quot;%d %d&quot;, &amp;x, &amp;y);</font></div><div><font style="font-size: 11pt;">       maxval = (*pmax)(x, y);   </font> <font><font><font style="font-size: 11pt;background-color: rgb(255, 250, 165);-evernote-highlight:true;">//</font></font><font style="font-size: 11pt;background-color: rgb(255, 250, 165);-evernote-highlight:true;">pmax 是一个函数指针，在前面加 * 就表示对它指向的函数进行调用。注意( )的优先级高于*，第一个括号不能省略。</font></font></div><div><font style="font-size: 11pt;">       printf(&quot;Max value is: %d\n&quot;, maxval);</font></div><div><font style="font-size: 11pt;">       return 0;</font></div><div><font style="font-size: 11pt;">}</font></div><div><font style="font-size: 11pt;"><br/></font></div></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;">【15 </span><span style="font-size: 12pt;"><a href="http://c.biancheng.net/view/vip_2024.html" style="font-size: 12pt;">彻底攻克C语言指针，再复杂的指针都可以理解</a></span><span style="font-size: 12pt;">】</span></div><ul><li><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(173, 0, 0);">C语言标准规定，对于一个符号的定义，编译器</span><span style="font-size: 12pt; color: rgb(173, 0, 0); font-weight: bold;">总是从它的</span><span style="background-color: rgb(255, 250, 165); font-size: 12pt; color: rgb(173, 0, 0); font-weight: bold;-evernote-highlight:true;">名字</span><span style="font-size: 12pt; color: rgb(173, 0, 0); font-weight: bold;">开始读取，然后按照优先级顺序依次解析</span><span style="font-size: 12pt; color: rgb(173, 0, 0);">。对，从名字开始，不是从开头也不是从末尾，这是理解复杂指针的关键！</span></span></div></li><li><div><span style="font-size: 12pt;">对于初学者，有几种运算符的优先级非常容易混淆，它们的优先级从高到低依次是：</span></div></li><ul><li><div><span style="font-size: 12pt;">定义中被括号( )括起来的那部分。</span></div></li><li><div><span style="font-size: 12pt;">后缀操作符：括号( )表示这是一个函数，方括号[ ]表示这是一个数组。</span></div></li><li><div><span style="font-size: 12pt;">* 前缀操作符：星号*表示“指向xxx的指针”。</span></div></li></ul></ul><div><span style="font-size: 12pt;"><br/></span></div><ul><li><div><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: &quot;Helvetica Neue&quot;, 微软雅黑, &quot;Microsoft Yahei&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">学会了“绝杀招式”，接下来我们就由浅入深，逐个击破下面的指针定义。</span></div></li></ul><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font color="#A8A8A8"><font style="font-size: 11pt;"><b>int *p1[6];</b></font></font></div><div><font color="#A8A8A8" style="font-size: 11pt;"><br/></font></div><div><font color="#A8A8A8" style="font-size: 11pt;">从 p1 开始理解，它的左边是 *，右边是 [ ]，[ ] 的优先级高于 *，所以编译器先解析p1[6]，p1 首先是一个拥有 6 个元素的数组，然后再解析int *，它用来说明数组元素的类型。从整体上讲，p1 是一个拥有 6 个 int * 元素的数组，也即指针数组。</font></div></div><div><font color="#A8A8A8" style="font-size: 12pt;"><br/></font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font color="#A8A8A8" style="font-size: 11pt;"><b>int (*p3)[6];</b></font></div><div><font color="#A8A8A8" style="font-size: 11pt;"><br/></font></div><div><font color="#A8A8A8" style="font-size: 11pt;">从 p3 开始理解，( ) 的优先级最高，编译器先解析(*p3)，p3 首先是一个指针，剩下的int [6]是 p3 指向的数据的类型，它是一个拥有 6 个元素的一维数组。从整体上讲，p3 是一个指向拥有 6 个 int 元素数组的指针，也即二维数组指针。</font></div><div><font style="font-size: 11pt;"><br/></font></div><div><font color="#AD0000" style="font-size: 11pt;">为了能够通过指针来遍历数组元素，在定义数组指针时需要进行降维处理，例如三维数组指针实际指向的数据类型是二维数组，二维数组指针实际指向的数据类型是一维数组，一维数组指针实际指向的是一个基本类型；在表达式中，数组名也会进行同样的转换（下降一维）。</font></div></div><div><font style="font-size: 12pt;"><br/></font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 11pt;"><b>int (*p4)(int, int);</b></font></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;">从 p4 开始理解，( ) 的优先级最高，编译器先解析(*p4)，p4 首先是一个指针，它后边的 ( ) 说明 p4 指向的是一个函数，括号中的int, int是参数列表，<u>开头的int用来说明函数的返回值类型。</u>整体来看，p4 是一个指向原型为int func(int, int);的函数的指针。</font></div></div><div><font style="font-size: 12pt;"><br/></font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 11pt;"><b>char *(* c[10])(int **p);</b></font></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;">这个（指针）定义有两个名字，分别是 c 和 p，乍看起来 p 是这个指针定义的变量名，但如果 p 是这个指针定义的变量名，c[10]这种写法就又定义了一个新的变量名，所以 p 不是这个指针定义的变量名。</font></div><div><font style="font-size: 11pt;">以 c 作为这个指针定义的变量名，这个定义解读为：c 是一个拥有 10 个元素的指针数组，每个指针指向一个原型为char *func(int **p);的函数。</font></div></div><div><font style="font-size: 12pt;"><br/></font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 11pt;"><font color="#2D4FC9">i<b>nt</b></font> <b><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">(*</span><u><font color="#AD0000">(</font>*(*pfunc)(int *)<font color="#AD0000">)</font></u><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">[5])</span><font color="#2D4FC9">(int *)</font>;</b></font></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;">pfunc 是一个函数指针（下划线部分），该函数的返回值是一个指针，它指向一个指针数组（黄色高亮部分），指针数组中的指针指向原型为int func(int *);的函数（蓝色字体部分）。</font></div></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;">【16 </span><span style="font-size: 16px;"><a href="http://c.biancheng.net/view/2026.html" style="font-size: 16px;">C语言指针总结</a></span><span style="font-size: 12pt;">】</span></div><ul><li><div><span style="font-size: 16px;">常见指针变量的定义</span></div></li></ul><div><span style="font-size: 12pt;">         </span><span style="font-size: 12pt;"><img src="9_指针（2）_files/Image [4].png" type="image/png" data-filename="Image.png" width="451"/></span></div><ul><li><div><span style="font-size: 11pt;">指针变量可以进行加减运算，例如p++、p+i、p-=i。指针变量的加减运算并不是简单的加上或减去一个整数，而是跟指针指向的数据类型有关。</span></div></li><li><div><span style="font-size: 11pt;">给指针变量赋值时，要将一份数据的地址赋给它，不能直接赋给一个整数，例如int *p = 1000;是没有意义的，使用过程中一般会导致程序崩溃。</span></div></li><li><div><span style="font-size: 11pt;">使用指针变量之前一定要初始化，否则就不能确定指针指向哪里，如果它指向的内存没有使用权限，程序就崩溃了。对于暂时没有指向的指针，建议赋值NULL。</span></div></li><li><div><span style="font-size: 11pt;">两个指针变量可以相减。如果两个指针变量指向同一个数组中的某两个元素，那么相减的结果就是两个指针之间相差的元素个数。</span></div></li><li><div><span style="font-size: 11pt;">数组也是有类型的，数组名的本意是表示一组类型相同的数据。在定义数组时，或者和 sizeof、&amp; 运算符一起使用时数组名才表示整个数组，表达式中的数组名会被转换为一个指向数组的指针。</span></div></li></ul><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div></div><div><br/></div></span>
</div></body></html> 